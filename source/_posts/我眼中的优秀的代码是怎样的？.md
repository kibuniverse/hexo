---
title: æˆ‘çœ¼ä¸­çš„ä¼˜ç§€çš„ä»£ç æ˜¯æ€æ ·çš„ï¼Ÿ
date: 2022-02-27
tag: Code specification
---

> è¿™ç¯‡æ–‡ç« ä¸»è¦è®¨è®ºæˆ‘çœ¼ä¸­çš„ react çš„ä¼˜ç§€ä»£ç 



## æ•…äº‹èƒŒæ™¯

æœ€è¿‘ç”±äºä¸šåŠ¡éœ€æ±‚ï¼Œéœ€è¦ä¿®æ”¹ä¸€ä¸ªä¸€åƒå…«ç™¾è¡Œçš„ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶çš„ä½œç”¨æ˜¯å±•ç¤ºä¸ªäººä¿¡æ¯å¹¶åŒ…å«å„ç§ä¿®æ”¹åŠŸèƒ½ï¼Œ æˆ‘éœ€è¦åœ¨ä¸Šé¢å¯¹è€çš„å±•ç¤ºé€»è¾‘åšæ–°çš„ä¿®æ”¹å¹¶ä¸”åŠ å…¥æ–°çš„åŠŸèƒ½ã€‚
äº‹æƒ…åˆšå¼€å§‹è¿›å±•çš„è¿˜ç®—â€œæ¯”è¾ƒé¡ºåˆ©â€ï¼Œæˆ‘æˆåŠŸæ‰¾åˆ°äº†æˆ‘éœ€è¦ä¿®æ”¹çš„åœ°æ–¹å¹¶ä¸”åœ¨å…¶åˆ¤æ–­å±•ç¤ºçš„åœ°æ–¹åŠ ä¸Šäº†æˆ‘çš„é€»è¾‘ã€‚

å°±åœ¨æˆ‘å¼€å¿ƒçš„ä»¥ä¸ºå®Œæˆäº†éœ€æ±‚çš„æ—¶å€™ï¼Œå¿½ç„¶è‡ªæµ‹çš„æ—¶å€™å‘ç°ä¸ç¬¦åˆé¢„æœŸçš„åœ°æ–¹ï¼Œç„¶åç¨å¾®æ’æŸ¥äº†ä¸€ä¸‹å‘ç°æ˜¯æˆ‘æŠŠè¿™ä¸ªç»„ä»¶æƒ³çš„å¤ªç®€å•äº†ï¼Œè¿™é‡Œç®€å•çš„ä¸¾ä¸€ä¸ªä¾‹å­

```tsx
type FunComProps = {
  userName: string
}
const FunCom: React.FC<FunComProps> = props => {
  const [userName, setUserName] = React.useState('')
  // äº‹ä»¶åç§°æˆ‘å¿˜äº†ï¼Œä¸è¦åœ¨æ„ã€‚ã€‚ã€‚
  const changeUserName = (e: InputElementOnchangeEvent) => {
    setUserName(e.value)
  }
  
  return (
    <div>
      <input onChange={changeUserName} placeholder="ä¿®æ”¹ç”¨æˆ·å" />
      <button onClick={() => setUserName('')}>å–æ¶ˆ</button>
    </div>
  )
}
```

ä»£ç å¤§ä½“å°±åƒä¸Šé¢è¿™æ ·ï¼Œè¿™ä¸ªç»„ä»¶ç»´æŠ¤äº†ä¸¤ä¸ªå…³äº userName çš„çŠ¶æ€ï¼Œè‡³äºä¸ºä»€ä¹ˆç»´æŠ¤ä¸¤ä¸ªï¼Œæˆ‘ç›®å‰è¿˜æ²¡ææ˜ç™½ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯åœ¨onChange äº‹ä»¶ä¸­ç›´æ¥ä¿®æ”¹ stateï¼Œåœ¨onChange äº‹ä»¶ä¸­ç›´æ¥ä¿®æ”¹ state å…¶å®æ— å¯åšéï¼Œä½†æ˜¯ä¹Ÿè¦åˆ†æƒ…å†µè®¨è®ºï¼Œè¿™ä¸ªæƒ…å†µæˆ‘çœ‹æ¥æ˜¯ä¸éœ€è¦çš„ã€‚è¿˜æœ‰å°±æ˜¯å‡½æ•°ä¸€ä¸ªå‚æ•°ï¼Œé‡Œé¢åˆè¿‡å¤šçš„åº”ç”¨å¤–éƒ¨å˜é‡ï¼Œè¿™éƒ½ç»™è°ƒè¯•å¸¦æ¥äº†ä¸ç¡®å®šæ€§ã€‚

okï¼Œæ•…äº‹å¤§æ¦‚å°±è®²åˆ°è¿™é‡Œå§ï¼Œæ„Ÿè§‰å¥½åƒåœ¨åæ§½ä¸€æ ·ğŸ˜…



## ä»€ä¹ˆæ˜¯æˆ‘çœ¼ä¸­ä¼˜ç§€çš„ä»£ç å‘¢ï¼Ÿ

å¦‚ä½•å®šä¹‰ä»€ä¹ˆæ˜¯ä¼˜ç§€ä»£ç å‘¢ï¼Ÿæ¯ä¸ªäººå¯èƒ½ç­”æ¡ˆéƒ½ä¸ä¸€æ ·ï¼Œæˆ‘è§‰å¾—ä¸»è¦æœ‰ä¸¤ä¸ªç‚¹

1. çœ‹èµ·æ¥æ¯”è¾ƒç›´è§‚
2. æ”¹èµ·æ¥å‘æ¯”è¾ƒå°‘

æˆ‘ä»¬åˆ†æƒ…å†µè¯´ä¸€ä¸‹

### çœ‹èµ·æ¥æ¯”è¾ƒç›´è§‚

è¿™é‡Œéœ€è¦åˆ†æƒ…å†µè®¨è®ºï¼Œè¿™é‡Œæˆ‘ä»¬åªè®¨è®ºåŸºæœ¬çš„ä¸šåŠ¡ä»£ç ï¼Œå¯¹äºåº•å±‚çš„é»‘é­”æ³•æˆ‘ä»¬ä¸åšè®¨è®º(reduxï¼Œrxjs ç­‰)ã€‚

> ä»£ç å®é™…ä¸Šæ˜¯å†™ç»™ç¨‹åºå‘˜çœ‹çš„ï¼Œåªæ˜¯åˆšå¥½èƒ½è¢«è®¡ç®—æœºæ‰§è¡Œè€Œå·²ï¼šï¼‰

çœ‹ä»£ç ç›®çš„ä¸»è¦æ˜¯ä¸ºäº†ç†è§£ç›¸å…³çš„é€»è¾‘ç„¶åæ–¹ä¾¿æˆ‘ä»¬åœ¨ä¸Šé¢è¿›è¡Œä¿®æ”¹ï¼Œé‚£æ€ä¹ˆæ ·çš„ä»£ç çœ‹èµ·æ¥æ˜¯æ¯”è¾ƒç›´è§‚çš„å‘¢ï¼Ÿ

#### åˆç†çš„å˜é‡å‘½å

è¿™ä¸ªæ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„è¯é¢˜ï¼Œæœ‰è¶£çš„æ˜¯å¾ˆå¤šç»Ÿè®¡ä»¤ç¨‹åºå‘˜æœ€è‹¦æ¼çš„æ¦œå•ä¸Šéƒ½ä¼šæœ‰å˜é‡å‘½åå­˜åœ¨ï¼Œè¿™ä¹Ÿä¸€å®šç¨‹åº¦ä¸Šè¯´æ˜äº†å˜é‡å‘½åçš„å›°éš¾ï¼Œä½†æ˜¯åˆç†çš„å˜é‡å‘½åä¼šæœ‰æ•ˆæå‡æˆ‘ä»¬çœ‹ä»£ç çš„æ€è·¯ã€‚



#### åˆç†çš„æ³¨é‡Š

è®°å¾—ä¸Šä¸Šå­¦æœŸè½¯ä»¶å·¥ç¨‹è¯¾ä¸Šï¼Œæˆ‘ä»¬è€å¸ˆæœ€åè®©æˆ‘ä»¬è®¾è®¡ä¸€ä¸ªç³»ç»Ÿï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªè¦æ±‚å°±æ˜¯æ¯ä¸€è¡Œä»£ç éƒ½å¿…é¡»æœ‰æ³¨é‡Šï¼Œè™½ç„¶ç°åœ¨è§‰å¾—æ˜¯åœ¨æ˜¯æœ‰ç‚¹ç¦»è°±ï¼Œä½†æ˜¯æ³¨é‡Šç¡®å®èƒ½å¸®æˆ‘ä»¬è§„é¿æ‰å¾ˆå¤šå‘ï¼Œç‰¹åˆ«æ˜¯åœ¨å¯èƒ½ä¼šæœ‰å‘çš„åœ°æ–¹å†™å¥½æ³¨é‡Šã€‚ã€‚ã€‚



#### å…³äºè®¾è®¡æ¨¡å¼çš„ä½¿ç”¨



### æ”¹èµ·æ¥å‘æ¯”è¾ƒå°‘

ç¬¬äºŒä¸ªå°±æ˜¯æ”¹èµ·æ¥å‘æ¯”è¾ƒå°‘ï¼Œè¿™ç‚¹å…¶å®åŠå…¶å¤æ‚ï¼Œä¹Ÿæ˜¯è½¯ä»¶å·¥ç¨‹çš„æ ¸å¿ƒç›®æ ‡æ‰€åœ¨ï¼Œå³**ç¼–å†™å¯æŒç»­ç»´æŠ¤çš„ä»£ç **ï¼Œè¿™åœ¨å·¥ç¨‹ä¸Šæ¯”è¾ƒéš¾åšåˆ°ï¼ŒåŸå› å°±æ˜¯ä»£ç ä¼šç»è¿‡ä¸åŒçš„äººï¼Œå¤§å®¶çš„ç¼–ç ä¹ æƒ¯ä¹Ÿå„ä¸ç›¸åŒã€‚



#### çŠ¶æ€çš„æŠ½è±¡

ç¼–ç¨‹æœ¬èº«å°±æ˜¯å¯¹äº‹ç‰©çš„æŠ½è±¡åçš„ä¸€ç§è¡¨è¾¾ï¼Œæ‰€ä»¥åœ¨ react çš„ç»„ä»¶ä¸­æˆ‘ä»¬ä¼šä½¿ç”¨ä¸€ç³»åˆ—çš„**çŠ¶æ€å€¼**æ¥å­˜å‚¨ç›¸å…³çš„çŠ¶æ€ã€‚æ¯”å¦‚å¯¹äºä¸€ä¸ªè‡ªè¡Œè½¦ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæŠ½è±¡å‡ºæ¥ä¸¤ç§çŠ¶æ€ï¼Œ*éª‘è¡Œä¸­* å’Œ *åœæ­¢*ï¼Œè®©æˆ‘ä»¬ç”¨ä»£ç è¡¨ç¤º

```tsx
enum BikeStatusEnum = {
  Riding,
  Still,
}
const Bike: React.FC = () => {
  const [status, setStatus] = React.useState<BikeStatusEnum>(BikeStatusEnum.Still);
  
  const startRiding = () => {
     setStatus(BikeStatusEnum.Riding);
  }
  return (...)
}
```

å‡è®¾æ¥ä¸‹æ¥æˆ‘ä»¬è¦æœ‰ä¸€ä¸ªæ–°çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬çš„è‡ªè¡Œè½¦è£…äº†ä¸€ä¸ªç¯ï¼Œè¿™ä¸ªç¯çš„å‘ç”µè£…ç½®æ¥è‡ªäºè‡ªè¡Œè½¦ğŸš´â€â™€ï¸è½¦è½®åšåˆ‡å‰²ç£åŠ›çº¿è¿åŠ¨ï¼Œå¯¼ä½“äº§ç”Ÿæ„Ÿåº”ç”µæµä»è€Œè®©è½¦å‰çš„ç¯äº®èµ·æ¥ï¼Œè¿™ä¸ªæ—¶å€™å°±æœ‰ä¸¤ç§çŠ¶æ€äº†ï¼Œè½¦çš„è¡Œé©¶çŠ¶æ€å’Œè½¦çš„ç¯æ˜¯å¦æ‰“å¼€çš„çŠ¶æ€ï¼Œè¿™æ—¶å€™ä»£ç å¦‚ä¸‹

```tsx
enum LightStatusEnum = {
  Bright,
  Off,
}
const Bike: React.FC = () => {
  const [status, setStatus] = React.useState<BikeStatusEnum>(BikeStatusEnum.Still);
  const [light, setLight] = React.useState<LightStatusEnum>(LightStatusEnum.Off);
  
  React.useEffect(() => {
    if (status === BikeStatusEnum.riding) {
      setLight(LightStatusEnum.Bright)
    }
  }, [status])
}
```

è¿™æ ·å†™å¯ä»¥å—ï¼Ÿ

ç»“è®ºæ˜¯å½“ç„¶å¯ä»¥ï¼Œä½†æ˜¯å½“æˆ‘ä»¬æ€è€ƒè½¦ç¯çš„çŠ¶æ€ï¼Œè½¦ç¯æ˜¯æˆ‘ä»¬çš„è½¦è¾†è¡Œé©¶çŠ¶æ€å¼ºç»‘å®šï¼Œç°åœ¨è¿˜ä¸å­˜åœ¨è®©è½¦ç¯çš„çŠ¶æ€ç‹¬ç«‹äºè½¦è¾†è¡Œé©¶çŠ¶æ€çš„é€»è¾‘ï¼Œé‚£ä¹ˆæ„å‘³è½¦ç¯æ˜¯æ²¡æœ‰è‡ªå·±ç‹¬ç«‹çš„çŠ¶æ€çš„ï¼Œå®ƒçš„æ‰€æœ‰çŠ¶æ€éƒ½æ˜¯æ ¹æ®è½¦è¾†è¡Œé©¶çŠ¶æ€ç¡®å®šçš„ï¼Œæ‰€ä»¥è½¦ç¯ä¸åº”è¯¥æ˜¯ä¸€ä¸ª stateï¼Œè€Œåº”è¯¥æ˜¯ä¸€ä¸ª valueï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ä»£ç åº”è¯¥åƒä¸‹é¢è¿™æ ·

```tsx
const Bike: React.FC = () => {
  const [status, setStatus] = React.useState<BikeStatusEnum>(BikeStatusEnum.Still);
  const light = React.useMemo<LightStatusEnum>(() => {
    let lightstatus = LightStatusEnum.Off;
    switch (status) {
      case BikeStatusEnum.Still:
        lightstatus = LightStatusEnum.Off;
        break;
      case BikeStatusEnum.Riding:
        lightstatus = LightStatusEnum.Bright;
        break;
    }
    return lightstatus;
  }, [status]);
  
}
```

è¿™å°±æ˜¯æˆ‘è¦è¯´çš„å¯¹çŠ¶æ€çš„æ€è€ƒï¼Œæˆ‘ä»¬åº”è¯¥æå–æ¨¡å‹çš„å…³é”®çŠ¶æ€ï¼Œæœ‰ä¸€ç§ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«çš„æ„Ÿè§‰ğŸ˜‚ï¼Œä½¿ç”¨å°‘çš„çŠ¶æ€æ¥ç®€åŒ–æˆ‘ä»¬çš„ä»£ç ï¼Œè¿™å¯¹äºä»£ç å¤æ‚åº¦æ˜¯ä¸€ä¸ªæ¯”è¾ƒæœ‰æ•ˆçš„æ§åˆ¶æ‰‹æ®µã€‚



#### å‡½æ•°å¼çš„å‡½æ•°

